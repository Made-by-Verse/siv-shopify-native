{% style %}
  .color-{{ section.settings.color_scheme }} {
    --color-primary: {{ section.settings.color_scheme.settings.primary }};
    --color-contrast: {{ section.settings.color_scheme.settings.contrast }};
    --color-lines: {{ section.settings.color_scheme.settings.lines }};
  }
{% endstyle %}

{% assign featured_product = all_products[settings.featured_product] %}

<div class="w-full relative flex items-end justify-center home-hero">
  {% if section.settings.backgroundImage != blank %}
    {% render 'responsive-image', image: section.settings.backgroundImage, wrapper_class: "absolute inset-0 ", image_class: "object-cover absolute inset-0 h-full w-full" %}
  {% else %}
    <div class="hero-placeholder placeholder-image">
      {{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg'  }}
    </div>
  {% endif %}
  <div class="wrapper text-primary">
    <h2 
      x-data="{ shown: false }" 
      x-intersect.half:enter="shown = true"
      x-intersect.half:leave="shown = false"
      :class="shown ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'"
      class="h1 max-w-3xl"
    >
      {{ section.settings.hero_heading }}
    </h2>
    <div class="flex justify-between w-full items-end">
      {% if section.settings.hero_content != blank %}
        <div class="max-w-xl">{{ section.settings.hero_content }}</div>
      {% endif %}
      {% if featured_product != blank %}
        <div class="featured-product">
          <div class="w-1/3 flex justify-center items-center bg-primary">
            {% render 'responsive-image', image: featured_product.featured_image, wrapper_class: "relative aspect-portrait w-full h-full overflow-hidden", image_class: "absolute inset-0 object-cover w-full h-full" %}
          </div>
          <div class="w-2/3 p-8 flex flex-col bg-white">
            <h3 class="max-w-xs font-heading text-3xl">
              {{ featured_product.title }}
            </h3>
            <h5 class="mb-10">
              {{ featured_product.price | money }}
            </h5>
            <div class="mt-auto">
              <button class="btn btn--black group px-6 py-3 font-medium text-sm tracking-wider rounded-full inline-flex items-center gap-3" @click="dispatch('open-product-drawer', { productId: {{ featured_product.id }} })">
                <span class="relative overflow-hidden flex flex-col h-5">
                 <span class="translate-y-0 group-hover:translate-y-full duration-500">Shop Now</span>
                  <span class="absolute -translate-y-full group-hover:-translate-y-0 duration-500">Shop Now</span>
              </span>
              </button>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.home-hero.name",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "image_picker",
      "id": "backgroundImage",
      "label": "Background Image"
    },
    {
      "type": "richtext",
      "id": "hero_content",
      "label": "Hero Content",
    },
    {
      "type": "url",
      "id": "hero_button_url",
      "label": "Hero Button URL"
    },
    {
      "type": "text",
      "id": "hero_button_text",
      "label": "Hero Button Text",
      "default": "Shop Now"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Colors",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "hero_heading",
      "label": "Hero Heading",
    }
  ],
  "presets": [
    {
      "name": "t:sections.home-hero.name",
      "settings": {
        "hero_content": "<p>Welcome to our store. Discover our unique collection of products.</p>",
        "hero_button_text": "Shop Now",
        "hero_button_url": "/collections/all"
      }
    }
  ]
}
{% endschema %}
